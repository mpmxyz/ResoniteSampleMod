<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' Or '$(Platform)' == 'Any CPU' ">MonkeyLoader</Platform>
    <ProjectGuid>{3FA1B07B-D0C9-4EA5-B228-93DD6891EFD2}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>SampleMod</RootNamespace>
    <AssemblyName>mpmxyz.SampleMod</AssemblyName>
	<Authors>mpmxyz</Authors>
    <TargetFrameworkVersion>v4.7.2</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
    <Deterministic>true</Deterministic>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|RML' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\DebugRML\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|RML' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\ReleaseRML\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|MonkeyLoader' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\DebugMonkey\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|MonkeyLoader' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\ReleaseMonkey\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="Assembly-CSharp">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\Assembly-CSharp.dll</HintPath>
    </Reference>
    <Reference Include="Harmony" Condition="'$(Platform)' == 'RML'">
      <HintPath>$(ResonitePath)\rml_libs\0Harmony.dll</HintPath>
    </Reference>
    <Reference Include="Harmony" Condition="'$(Platform)' == 'MonkeyLoader'">
      <HintPath>$(ResonitePath)\0Harmony.dll</HintPath>
    </Reference>
    <Reference Include="Elements.Assets">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\Elements.Assets.dll</HintPath>
    </Reference>
    <Reference Include="Elements.Core">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\Elements.Core.dll</HintPath>
    </Reference>
    <Reference Include="Elements.Quantity">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\Elements.Quantity.dll</HintPath>
    </Reference>
    <Reference Include="FrooxEngine">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\FrooxEngine.dll</HintPath>
    </Reference>
    <Reference Include="FrooxEngine.Commands">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\FrooxEngine.Commands.dll</HintPath>
    </Reference>
    <Reference Include="FrooxEngine.Weaver">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\FrooxEngine.Weaver.dll</HintPath>
    </Reference>
    <Reference Include="MonkeyLoader" Condition="'$(Platform)' == 'MonkeyLoader'">
      <HintPath>$(ResonitePath)\MonkeyLoader.dll</HintPath>
    </Reference>
    <Reference Include="MonkeyLoader.Resonite.Integration" Condition="'$(Platform)' == 'MonkeyLoader'">
      <HintPath>$(ProjectDir)\UnpackedGamePack\MonkeyLoader.GamePacks.Resonite\lib\net462\MonkeyLoader.Resonite.Integration.dll</HintPath>
    </Reference>
    <Reference Include="ProtoFlux.Core">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\ProtoFlux.Core.dll</HintPath>
    </Reference>
    <Reference Include="ProtoFlux.Nodes.Core">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\ProtoFlux.Nodes.Core.dll</HintPath>
    </Reference>
    <Reference Include="ProtoFlux.Nodes.FrooxEngine">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\ProtoFlux.Nodes.FrooxEngine.dll</HintPath>
    </Reference>
    <Reference Include="ProtoFluxBindings">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\ProtoFluxBindings.dll</HintPath>
    </Reference>
    <Reference Include="ResoniteModLoader" Condition="'$(Platform)' == 'RML'">
      <HintPath>$(ResonitePath)\Libraries\ResoniteModLoader.dll</HintPath>
    </Reference>
    <Reference Include="QuantityX">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\QuantityX.dll</HintPath>
    </Reference>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Patches.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <Compile Include="ISampleMod.cs" />
    <Compile Include="SampleModMonkey.cs" Condition="'$(Platform)' == 'MonkeyLoader'" />
    <Compile Include="SampleModRML.cs" Condition="'$(Platform)' == 'RML'" />
    <Compile Include="TestableCode.cs" />
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <PropertyGroup Condition="'$(Platform)' == 'RML'">
    <PostBuildEvent>copy /Y "$(TargetPath)" "$(ResonitePath)\rml_mods\$(TargetFileName)"</PostBuildEvent>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'MonkeyLoader'">
    <PreBuildEvent>
		copy /Y "$(ResonitePath)\MonkeyLoader\GamePacks\MonkeyLoader.GamePacks.Resonite.nupkg" "$(ProjectDir)\UnpackedGamePack\MonkeyLoader.GamePacks.Resonite.zip"
		powershell -command "Expand-Archive -Force '$(ProjectDir)\UnpackedGamePack\MonkeyLoader.GamePacks.Resonite.zip' '$(ProjectDir)\UnpackedGamePack\MonkeyLoader.GamePacks.Resonite'"
	</PreBuildEvent>
    <PostBuildEvent>
		nuget pack "$(ProjectDir)\SampleMod.csproj" -Properties "Configuration=$(Configuration);Platform=$(Platform)"
		copy /Y "$(TargetDir)\mpmxyz.SampleMod.1.0.0.nupkg" "$(ResonitePath)\MonkeyLoader\Mods"
	</PostBuildEvent>
  </PropertyGroup>
	<PropertyGroup>
		<GeneratePackageOnBuild>true</GeneratePackageOnBuild>
	</PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'RML'">
    <StartAction>Program</StartAction>
    <StartProgram>$(ResonitePath)\Resonite.exe</StartProgram>
    <StartArguments>-Screen -CachePath "$(ResoniteCache)" -LoadAssembly Libraries/ResoniteModLoader.dll</StartArguments>
    <StartWorkingDirectory>$(ResonitePath)</StartWorkingDirectory>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'MonkeyLoader'">
    <StartAction>Program</StartAction>
    <StartProgram>$(ResonitePath)\Resonite.exe</StartProgram>
    <StartArguments>-Screen -CachePath "$(ResoniteCache)"</StartArguments>
    <StartWorkingDirectory>$(ResonitePath)</StartWorkingDirectory>
  </PropertyGroup>
</Project>