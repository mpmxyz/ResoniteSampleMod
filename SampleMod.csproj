<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <Platform Condition=" '$(Platform)' == '' ">MonkeyLoader</Platform>
    <AssemblyName>mpmxyz.SampleMod</AssemblyName>
    <Authors>$authors$</Authors>
    <TargetFramework>net472</TargetFramework>
    <Platforms>MonkeyLoader;RML</Platforms>
    <AssemblyTitle>SampleMod</AssemblyTitle>
    <Product>SampleMod</Product>
    <Description>A sample Resonite Mod</Description>
    <Copyright>CC0</Copyright>
    <Version>1.0.0.0</Version>
    <PackageProjectUrl>https://github.com/mpmxyz/ResoniteSampleMod</PackageProjectUrl>
    <PackageReleaseNotes>Summary of changes made in this release of the package.</PackageReleaseNotes>
    <PackageTags>Resonite</PackageTags>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|RML' ">
    <OutputPath>bin\DebugRML\</OutputPath>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|RML' ">
    <OutputPath>bin\ReleaseRML\</OutputPath>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|MonkeyLoader' ">
    <OutputPath>bin\DebugMonkey\</OutputPath>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|MonkeyLoader' ">
    <OutputPath>bin\ReleaseMonkey\</OutputPath>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'RML'">
    <PostBuildEvent>copy /Y "$(TargetPath)" "$(ResonitePath)\rml_mods\$(TargetFileName)"</PostBuildEvent>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'MonkeyLoader'">
    <PreBuildEvent>
		nuget init "$(ResonitePath)\MonkeyLoader\GamePacks" "$(ProjectDir)\MonkeyLoader Gamepacks"
		nuget init "$(ResonitePath)\MonkeyLoader\Mods" "$(ProjectDir)\MonkeyLoader Mods"
	</PreBuildEvent>
    <PostBuildEvent>
		nuget pack "$(ProjectDir)\SampleMod.csproj" -Properties "Configuration=$(Configuration);Platform=$(Platform)"
		echo $(VersionPrefix) $(AssemblyName) $(AssemblyVersion) $(FileVersion) $(InformationalVersion) $(VersionSuffix) $(Version)
		copy /Y "$(TargetDir)\$(AssemblyName).$(PackageVersion).nupkg" "$(ResonitePath)\MonkeyLoader\Mods\$(AssemblyName).nupkg"
	</PostBuildEvent>
  </PropertyGroup>
  <PropertyGroup>
    <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'RML'">
    <StartAction>Program</StartAction>
    <StartProgram>$(ResonitePath)\Resonite.exe</StartProgram>
    <StartArguments>-Screen -CachePath "$(ResoniteCache)" -LoadAssembly Libraries/ResoniteModLoader.dll</StartArguments>
    <StartWorkingDirectory>$(ResonitePath)</StartWorkingDirectory>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'MonkeyLoader'">
    <StartAction>Program</StartAction>
    <StartProgram>$(ResonitePath)\Resonite.exe</StartProgram>
    <StartArguments>-Screen -CachePath "$(ResoniteCache)"</StartArguments>
    <StartWorkingDirectory>$(ResonitePath)</StartWorkingDirectory>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="Assembly-CSharp">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\Assembly-CSharp.dll</HintPath>
    </Reference>
    <Reference Include="Elements.Assets">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\Elements.Assets.dll</HintPath>
    </Reference>
    <Reference Include="Elements.Core">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\Elements.Core.dll</HintPath>
    </Reference>
    <Reference Include="Elements.Quantity">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\Elements.Quantity.dll</HintPath>
    </Reference>
    <Reference Include="FrooxEngine">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\FrooxEngine.dll</HintPath>
    </Reference>
    <Reference Include="FrooxEngine.Commands">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\FrooxEngine.Commands.dll</HintPath>
    </Reference>
    <Reference Include="FrooxEngine.Weaver">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\FrooxEngine.Weaver.dll</HintPath>
    </Reference>
    <Reference Include="ProtoFlux.Core">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\ProtoFlux.Core.dll</HintPath>
    </Reference>
    <Reference Include="ProtoFlux.Nodes.Core">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\ProtoFlux.Nodes.Core.dll</HintPath>
    </Reference>
    <Reference Include="ProtoFlux.Nodes.FrooxEngine">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\ProtoFlux.Nodes.FrooxEngine.dll</HintPath>
    </Reference>
    <Reference Include="ProtoFluxBindings">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\ProtoFluxBindings.dll</HintPath>
    </Reference>
    <Reference Include="ResoniteModLoader">
      <HintPath>$(ResonitePath)\Libraries\ResoniteModLoader.dll</HintPath>
    </Reference>
    <Reference Include="QuantityX">
      <HintPath>$(ResonitePath)\Resonite_Data\Managed\QuantityX.dll</HintPath>
    </Reference>
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
  </ItemGroup>
  <ItemGroup Condition="'$(Platform)' == 'RML'">
    <Compile Update="SampleModRML.cs" />
    <Reference Include="Harmony">
      <HintPath>$(ResonitePath)\rml_libs\0Harmony.dll</HintPath>
    </Reference>
  </ItemGroup>
  <ItemGroup Condition="'$(Platform)' == 'MonkeyLoader'">
    <Compile Update="SampleModMonkey.cs" />
    <Reference Include="Harmony">
      <HintPath>$(ResonitePath)\0Harmony.dll</HintPath>
    </Reference>
    <Reference Include="MonkeyLoader">
      <HintPath>$(ResonitePath)\MonkeyLoader.dll</HintPath>
    </Reference>
    <PackageReference Include="MonkeyLoader.GamePacks.Resonite" Version="1.0.1" />    
  </ItemGroup>
  <ItemGroup>
    <Compile Remove="Test\ExampleUnitTest.cs" />
    <Compile Remove="Test\Properties\AssemblyInfo.cs" />
    <Compile Remove="obj\MonkeyLoader\Debug\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs" />
    <Compile Remove="obj\MonkeyLoader\Release\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs" />
    <Compile Remove="obj\RML\Debug\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs" />
    <Compile Remove="obj\RML\Release\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs" />
    <Compile Remove="obj\MonkeyLoader\Debug\net472\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs" />
    <Compile Remove="obj\MonkeyLoader\Debug\net472\SampleMod.AssemblyInfo.cs" />
    <Compile Remove="obj\MonkeyLoader\Release\net472\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs" />
    <Compile Remove="obj\MonkeyLoader\Release\net472\SampleMod.AssemblyInfo.cs" />
    <Compile Remove="obj\RML\Debug\net472\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs" />
    <Compile Remove="obj\RML\Debug\net472\SampleMod.AssemblyInfo.cs" />
    <Compile Remove="obj\RML\Release\net472\.NETFramework,Version=v4.7.2.AssemblyAttributes.cs" />
    <Compile Remove="obj\RML\Release\net472\SampleMod.AssemblyInfo.cs" />
  </ItemGroup>
  <ItemGroup>
    <Folder Include="Test\" />
  </ItemGroup>
</Project>